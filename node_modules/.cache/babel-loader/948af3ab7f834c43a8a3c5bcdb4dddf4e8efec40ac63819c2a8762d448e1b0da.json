{"ast":null,"code":"import React,{useState}from'react';import supabase from'../../services/supabaseClient';import'./Category.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AddCategoryModal(_ref){let{onClose,onCategoryAdded}=_ref;const[newCategory,setNewCategory]=useState({name:'',color:'#000000'});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{// ユーザーIDの取得\nconst{data:userData}=await supabase.auth.getUser();if(!userData||!userData.user){throw new Error('ユーザー情報が取得できませんでした');}// カテゴリの追加（user_idを明示的に設定）\nconst{error:insertError}=await supabase.from('categories').insert([{name:newCategory.name,color:newCategory.color,user_id:userData.user.id}]);if(insertError)throw insertError;onCategoryAdded();}catch(err){console.error('カテゴリの追加中にエラーが発生しました:',err);setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"modal-title\",children:\"\\u65B0\\u3057\\u3044\\u30AB\\u30C6\\u30B4\\u30EA\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"category-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category-name\",children:\"\\u30AB\\u30C6\\u30B4\\u30EA\\u540D\"}),/*#__PURE__*/_jsx(\"input\",{id:\"category-name\",type:\"text\",value:newCategory.name,onChange:e=>setNewCategory({...newCategory,name:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category-color\",children:\"\\u30AB\\u30E9\\u30FC\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"color-picker\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"category-color\",type:\"color\",value:newCategory.color,onChange:e=>setNewCategory({...newCategory,color:e.target.value})}),/*#__PURE__*/_jsx(\"span\",{className:\"color-value\",children:newCategory.color})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"cancel-button\",children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button\",disabled:loading,children:loading?'保存中...':'保存'})]})]})]})});}export default AddCategoryModal;","map":{"version":3,"names":["React","useState","supabase","jsx","_jsx","jsxs","_jsxs","AddCategoryModal","_ref","onClose","onCategoryAdded","newCategory","setNewCategory","name","color","loading","setLoading","error","setError","handleSubmit","e","preventDefault","data","userData","auth","getUser","user","Error","insertError","from","insert","user_id","id","err","console","message","className","children","onSubmit","htmlFor","type","value","onChange","target","required","onClick","disabled"],"sources":["C:/Users/mexer/PR/task-manager-app/src/components/Category/AddCategoryModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport supabase from '../../services/supabaseClient';\nimport './Category.css';\n\nfunction AddCategoryModal({ onClose, onCategoryAdded }) {\n  const [newCategory, setNewCategory] = useState({\n    name: '',\n    color: '#000000'\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      // ユーザーIDの取得\n      const { data: userData } = await supabase.auth.getUser();\n      if (!userData || !userData.user) {\n        throw new Error('ユーザー情報が取得できませんでした');\n      }\n\n      // カテゴリの追加（user_idを明示的に設定）\n      const { error: insertError } = await supabase\n        .from('categories')\n        .insert([{\n          name: newCategory.name,\n          color: newCategory.color,\n          user_id: userData.user.id\n        }]);\n\n      if (insertError) throw insertError;\n      \n      onCategoryAdded();\n    } catch (err) {\n      console.error('カテゴリの追加中にエラーが発生しました:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal-content\">\n        <h2 className=\"modal-title\">新しいカテゴリ</h2>\n        \n        {error && (\n          <div className=\"error-message\">\n            {error}\n          </div>\n        )}\n        \n        <form onSubmit={handleSubmit} className=\"category-form\">\n          <div className=\"form-field\">\n            <label htmlFor=\"category-name\">\n              カテゴリ名\n            </label>\n            <input\n              id=\"category-name\"\n              type=\"text\"\n              value={newCategory.name}\n              onChange={(e) => setNewCategory({ ...newCategory, name: e.target.value })}\n              required\n            />\n          </div>\n          \n          <div className=\"form-field\">\n            <label htmlFor=\"category-color\">\n              カラー\n            </label>\n            <div className=\"color-picker\">\n              <input\n                id=\"category-color\"\n                type=\"color\"\n                value={newCategory.color}\n                onChange={(e) => setNewCategory({ ...newCategory, color: e.target.value })}\n              />\n              <span className=\"color-value\">{newCategory.color}</span>\n            </div>\n          </div>\n\n          <div className=\"modal-actions\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"cancel-button\"\n            >\n              キャンセル\n            </button>\n            <button\n              type=\"submit\"\n              className=\"save-button\"\n              disabled={loading}\n            >\n              {loading ? '保存中...' : '保存'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default AddCategoryModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}