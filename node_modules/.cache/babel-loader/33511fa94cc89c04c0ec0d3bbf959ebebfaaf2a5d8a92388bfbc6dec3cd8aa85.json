{"ast":null,"code":"import React,{useState,useEffect}from'react';import TaskList from'../Task/TaskList';import AddTaskModal from'../Task/AddTaskModal';import AddCategoryModal from'../Category/AddCategoryModal';import supabase from'../../services/supabaseClient';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(_ref){let{session}=_ref;const[tasks,setTasks]=useState([]);const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('all');// all, completed, upcoming\nconst[showAddTaskModal,setShowAddTaskModal]=useState(false);const[showAddCategoryModal,setShowAddCategoryModal]=useState(false);// タスクとカテゴリを取得\nuseEffect(()=>{fetchTasks();fetchCategories();},[session]);async function fetchTasks(){setLoading(true);const{data,error}=await supabase.from('tasks').select(`\n        *,\n        categories(id, name, color)\n      `).order('due_date',{ascending:true});if(error){console.error('タスクの取得中にエラーが発生しました:',error);}else{setTasks(data||[]);}setLoading(false);}async function fetchCategories(){const{data,error}=await supabase.from('categories').select('*').order('name',{ascending:true});if(error){console.error('カテゴリの取得中にエラーが発生しました:',error);}else{setCategories(data||[]);}}// タスクのフィルタリング\nconst filteredTasks=tasks.filter(task=>{if(activeTab==='all')return true;if(activeTab==='completed')return task.status;if(activeTab==='upcoming'){return!task.status&&task.due_date&&new Date(task.due_date)>=new Date();}return true;});// ログアウト処理\nconst handleLogout=async()=>{await supabase.auth.signOut();};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"dashboard-title\",children:\"\\u30BF\\u30B9\\u30AF\\u7BA1\\u7406\\u30A2\\u30D7\\u30EA\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tab-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('all'),className:`tab-button ${activeTab==='all'?'active':''}`,children:\"\\u3059\\u3079\\u3066\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('completed'),className:`tab-button ${activeTab==='completed'?'active':''}`,children:\"\\u5B8C\\u4E86\\u6E08\\u307F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('upcoming'),className:`tab-button ${activeTab==='upcoming'?'active':''}`,children:\"\\u4E88\\u5B9A\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddCategoryModal(true),className:\"category-button\",children:\"\\u30AB\\u30C6\\u30B4\\u30EA\\u8FFD\\u52A0\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddTaskModal(true),className:\"task-button\",children:\"\\u30BF\\u30B9\\u30AF\\u8FFD\\u52A0\"})]})]}),/*#__PURE__*/_jsx(TaskList,{tasks:filteredTasks,categories:categories,loading:loading,refreshTasks:fetchTasks}),showAddTaskModal&&/*#__PURE__*/_jsx(AddTaskModal,{categories:categories,onClose:()=>setShowAddTaskModal(false),onTaskAdded:()=>{fetchTasks();setShowAddTaskModal(false);}}),showAddCategoryModal&&/*#__PURE__*/_jsx(AddCategoryModal,{onClose:()=>setShowAddCategoryModal(false),onCategoryAdded:()=>{fetchCategories();setShowAddCategoryModal(false);}})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","TaskList","AddTaskModal","AddCategoryModal","supabase","jsx","_jsx","jsxs","_jsxs","Dashboard","_ref","session","tasks","setTasks","categories","setCategories","loading","setLoading","activeTab","setActiveTab","showAddTaskModal","setShowAddTaskModal","showAddCategoryModal","setShowAddCategoryModal","fetchTasks","fetchCategories","data","error","from","select","order","ascending","console","filteredTasks","filter","task","status","due_date","Date","handleLogout","auth","signOut","className","children","onClick","refreshTasks","onClose","onTaskAdded","onCategoryAdded"],"sources":["C:/Users/mexer/PR/task-manager-app/src/components/Dashboard/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport TaskList from '../Task/TaskList';\nimport AddTaskModal from '../Task/AddTaskModal';\nimport AddCategoryModal from '../Category/AddCategoryModal';\nimport supabase from '../../services/supabaseClient';\nimport './Dashboard.css';\n\nfunction Dashboard({ session }) {\n  const [tasks, setTasks] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('all'); // all, completed, upcoming\n  const [showAddTaskModal, setShowAddTaskModal] = useState(false);\n  const [showAddCategoryModal, setShowAddCategoryModal] = useState(false);\n\n  // タスクとカテゴリを取得\n  useEffect(() => {\n    fetchTasks();\n    fetchCategories();\n  }, [session]);\n\n  async function fetchTasks() {\n    setLoading(true);\n\n    const { data, error } = await supabase\n      .from('tasks')\n      .select(`\n        *,\n        categories(id, name, color)\n      `)\n      .order('due_date', { ascending: true });\n\n    if (error) {\n      console.error('タスクの取得中にエラーが発生しました:', error);\n    } else {\n      setTasks(data || []);\n    }\n\n    setLoading(false);\n  }\n\n  async function fetchCategories() {\n    const { data, error } = await supabase\n      .from('categories')\n      .select('*')\n      .order('name', { ascending: true });\n\n    if (error) {\n      console.error('カテゴリの取得中にエラーが発生しました:', error);\n    } else {\n      setCategories(data || []);\n    }\n  }\n\n  // タスクのフィルタリング\n  const filteredTasks = tasks.filter(task => {\n    if (activeTab === 'all') return true;\n    if (activeTab === 'completed') return task.status;\n    if (activeTab === 'upcoming') {\n      return !task.status && task.due_date && new Date(task.due_date) >= new Date();\n    }\n    return true;\n  });\n\n  // ログアウト処理\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n  };\n\n  return (\n    <div className=\"dashboard-container\">\n      <header className=\"dashboard-header\">\n        <h1 className=\"dashboard-title\">タスク管理アプリ</h1>\n        <button\n          onClick={handleLogout}\n          className=\"logout-button\"\n        >\n          ログアウト\n        </button>\n      </header>\n\n      <div className=\"dashboard-controls\">\n        <div className=\"tab-controls\">\n          <button\n            onClick={() => setActiveTab('all')}\n            className={`tab-button ${activeTab === 'all' ? 'active' : ''}`}\n          >\n            すべて\n          </button>\n          <button\n            onClick={() => setActiveTab('completed')}\n            className={`tab-button ${activeTab === 'completed' ? 'active' : ''}`}\n          >\n            完了済み\n          </button>\n          <button\n            onClick={() => setActiveTab('upcoming')}\n            className={`tab-button ${activeTab === 'upcoming' ? 'active' : ''}`}\n          >\n            予定\n          </button>\n        </div>\n        <div className=\"action-controls\">\n          <button\n            onClick={() => setShowAddCategoryModal(true)}\n            className=\"category-button\"\n          >\n            カテゴリ追加\n          </button>\n          <button\n            onClick={() => setShowAddTaskModal(true)}\n            className=\"task-button\"\n          >\n            タスク追加\n          </button>\n        </div>\n      </div>\n\n      <TaskList\n        tasks={filteredTasks}\n        categories={categories}\n        loading={loading}\n        refreshTasks={fetchTasks}\n      />\n\n      {showAddTaskModal && (\n        <AddTaskModal\n          categories={categories}\n          onClose={() => setShowAddTaskModal(false)}\n          onTaskAdded={() => {\n            fetchTasks();\n            setShowAddTaskModal(false);\n          }}\n        />\n      )}\n\n      {showAddCategoryModal && (\n        <AddCategoryModal\n          onClose={() => setShowAddCategoryModal(false)}\n          onCategoryAdded={() => {\n            fetchCategories();\n            setShowAddCategoryModal(false);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}